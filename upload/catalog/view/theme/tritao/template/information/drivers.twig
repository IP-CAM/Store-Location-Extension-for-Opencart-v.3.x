{{ header }}
<style>
.border-b{
  border-bottom: 1px solid #dee2e6;

}
.page-header h1{
  font-size: 24px;
    margin-bottom: 5px;
    font-weight: 600;
}
.page-drivers .table th {
    border-top: 1px solid #dee2e6 !important;
}
.table-responsive {
    display: block;
    width: 100%;
    overflow-x:hidden;
    -webkit-overflow-scrolling: touch;
}
.page-drivers input[type=search] {
    margin: 4px 4px 4px 5px;
    padding: 10px 5px;
    transition: width .2s ease-in-out;
    width:100%;
    border: #e0e0e0 1px solid;
    background-color: #fff;
    border-radius: 5px;
    color: #999;
    font-family: Lato,arial,helvetica,sans-serif;
    height: 40px;
    outline: 0;
    padding: 10px 15px;
    transition: background .1s ease-in-out,border .1s ease-in-out,color .1s ease-in-out;
    vertical-align: middle;
    padding: 10px;
    max-width: 100%;
    border: 0px;
    font-size: 15px;
    font-weight: normal;
    line-height: 22px;
    box-shadow: 0 1px 2px rgb(0 0 0 / 12%) inset;
    -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12) inset;
    -webkit-box-shadow: 0 1px 2px rgb(0 0 0 / 12%) inset;
    -o-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12) inset;
    transition: all 0.2s linear;
    -moz-transition: all 0.2s linear;
    -webkit-transition: all 0.2s linear;
    -o-transition: all 0.2s linear;
    background-color: #f2f2f2;
    border-bottom: 1px solid #fff;
    box-sizing: border-box;
    color: #000000;
}

#result h4 {
    color: #0171AD;
    font-weight: normal;
    font-family: HpSimplifiedLight;
    font-size: 22px;
}
#content .dataTables_wrapper {
    position: relative;
    padding: 0;
    margin: 0;
}
.page-header-driver {
    -webkit-background-size: cover !Important;
    -moz-background-size: cover !Important;
    -o-background-size: cover !Important;
    background-size: cover !Important;
    background: url(https://feasso.com.br/image/drivers.png);
    color: #fff;
}
.page-header-driver, .semi-transparent-bg {
    position: relative;
    width: 100%;
    float: left;
    height: 200px;
    overflow: hidden;
    text-align: center;
}
.page-header-driver h1 {
    color: #fff;
    display: inline-block;
    font-weight: 700;
    margin-top: 70px;
    margin-bottom: 0;
    line-height: 0;
    font-size: 35px;
    text-shadow: 0 2px 0 #464646;
    line-height: 1.5;
}
.page-header-driver .semi-transparent-bg {
    background: rgb(93 75 71 / 38%) !important
    /*padding-bottom: 35px;
    padding-top: 20px;*/
}
.page-header-driver .container {
    width: 100% !important;
    padding: 0px !important;
    max-width: 100%;
}
.btn-outline {
  color: #0171AD;
  background-color: #ffffff;
  border-color: #0171AD;
  font-weight: bold;
  letter-spacing: 0.05em;
}

.btn-outline {
  color: #0171AD;
  background-color: #ffffff;
  border-color: #0171AD;
  font-weight: bold;
  border-radius: 0;
}

.btn-outline:hover,
.btn-outline:active,
.btn-outline:focus,
.btn-outline.active {
  background: #0171AD;
  color: #ffffff;
  border-color: #0171AD;
  
}
@media only screen and (max-width: 767px){
  .page-drivers .system,.page-drivers .manual, .page-drivers .driver   {
     display: none !important;
}
.table-responsive, .table-responsive tbody, .table-responsive th, .table-responsive td, .table-responsive tr{
  float: left;
  width: 97%!important;
}
}
#information-drivers .row {
  display:table;
 width: 100%;
}
#information-drivers .table{
  width: 100 !important;
}
</style>
<div id="information-drivers">
  <div class="page-header-driver text-center">
    <div class="container">
    <div class="semi-transparent-bg"><h1>Drivers</h1></div> </div>
    </div>
  <div  class="container">  
  <div class="row">{{ column_left }}
    {% if column_left and column_right %}
    {% set class = 'col-sm-6' %}
    {% elseif column_left or column_right %}
    {% set class = 'col-sm-9' %}
    {% else %}
    {% set class = 'col-sm-12' %}
    {% endif %}
    <div id="content" class="{{ class }} page-drivers pt-4">{{ content_top }}
      <div class="row">
      <div class="col-lg-6 col-md-12 col-sm-12">
      <div class="page-header">
        <h1>Drivers: Digite o nome ou o modelo</h1>
      </div>
         
    </div>
          <div class="col-lg-6 col-md-12 col-sm-12">
            <div class="form-group required">
              <div class="col-sm-12">
                <input type="search"  placeholder="Digite o nome ou o modelo" id="input_search" class="form-control">
              </div>
            </div>
          </div>
        </div>
        <div class="border-b col-md-12 col-sm-12"></div>
        <div class="pt-4">
          <div class="table-responsive">
          <table id="result" class="table table-hover">
           <thead>
           <tr>
           <th class="text-left">Produto</th>
           <th class="text-center system">Compatibilidade</th>
           <th style="display: none !important;" class="text-center">tags</th>
           <th class="text-center manual">Manual</th>
           <th class="text-center driver">Driver</th>
           <!--<th class="text-right">Download</th>-->
           </tr>
          </thead>
           <tbody>
            {% if drivers %}
            {% for driver in drivers %}
            <tr id="driver-download-{{ driver.driver_id }}" >
            <td><h4>{{ driver.name }}</h4></td>
           <!-- <td class="text-center">{{ driver.mask }}</td>-->
            <td class="text-center system">{{ driver.system }}</td>
            <td style="display: none !important;">{{ driver.tags }}</td>
            <td class="text-center">
              {% if  driver.manual %}
              <a href="{{ driver.code_manual }}" data-toggle="tooltip" title="{{ text_donwload_manual }}" class="btn btn-outline">Download</a>
              {% else %}
              <p class="text-secondary">{{ text_not_manual }}</p>
              {% endif %} 
            </td>
            <td class="text-center"><a href="{{ driver.code }}" data-toggle="tooltip" title="{{ text_donwload_driver }}" class="btn btn-outline">Download</a>
            </td>
            </tr>
            {% endfor %}
            {% endif %}
            </tbody>
            </table>
            </div>
        </div>
          

   {{ content_bottom }}</div>
    {{ column_right }}</div>
  </div>  
</div>
<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap4.min.js" type="text/javascript"></script>
<link href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap4.min.css" rel="stylesheet">

<script type="text/javascript">
var table = $('#result').DataTable( {
      "lengthChange": false,
      "processing": true,
      "dom":"lrtip", //to hide default searchbox but search feature is not disabled hence customised searchbox can be made.
      language:{
        "sEmptyTable": "Nenhum registro encontrado",
        "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
        "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
        "sInfoFiltered": "(Filtrados de _MAX_ registros)",
        "sInfoPostFix": "",
        "sInfoThousands": ".",
        "sLengthMenu": "_MENU_ resultados por página",
        "sLoadingRecords": "Carregando...",
        "sProcessing": "Processando...",
        "sZeroRecords": "Nenhum registro encontrado",
        "sSearch": "Pesquisar",
        "oPaginate": {
            "sNext": "Próximo",
            "sPrevious": "Anterior",
            "sFirst": "Primeiro",
            "sLast": "Último"
        },
        "oAria": {
            "sSortAscending": ": Ordenar colunas de forma ascendente",
            "sSortDescending": ": Ordenar colunas de forma descendente"
        },
      // "data": jsonData,
    } 
} );
$('#input_search').keyup(function(){  
  table.search($(this).val()).draw();   // this  is for customized searchbox with datatable search feature.
   })

$('#button-report').on('click', function() {
   
var driver_id = $(this).data('report_id');
    $.ajax({
        url:'index.php?route=information/drivers/ReportDriver&driver_id='+ driver_id,
        type:'post',
        dataType:'json',
        data: $('#result').serialize(),
        beforeSend: function() {
            $('#button-report').button('loading');
        },
        complete: function() {
            $('#button-report').button('reset');
        },
        success: function(json) {
            $('.alert-dismissible').remove();
            if (json['error']) {
                $('#report').before('<div class="alert alert-danger alert-dismissible"><i class="fas fa-exclamation-circle"></i> ' + json['error'] + ' <button type="button" class="close" data-dismiss="alert">&times;</button></div>');
            }
            if (json['success']) {
                $('#report').before('<div class="alert alert-success alert-dismissible"><i class="fas fa-check-circle"></i> ' + json['success'] + ' <button type="button" class="close" data-dismiss="alert">&times;</button></div>');
            }
        },
        error: function(xhr, ajaxOptions, thrownError) {
            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        }
    });
});

</script>
{{ footer }}
