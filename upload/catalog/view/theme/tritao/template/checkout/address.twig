<form id="form-register">
<div class="row">
    {% if shipping_required %}
    {% set class = 'col-sm-6' %}
    {% else %}
    {% set class = 'col-sm-12' %}

    {% endif %}
    <div class="{{ class }}">
        <fieldset id="payment-address" class="pt-0">
           {% if addresses %}
  <div class="radio" style="display: none !important;">
    <label>
      <input type="radio" name="payment_address" value="existing" checked="checked" />
      {{ text_address_existing }}</label>
  </div>
  <div id="payment-existing">
    <select name="payment_address_id" class="form-control">
     {% for address in addresses %}
      {% if address['address_id'] == address_id %}
      <option value="{{ address.address_id }}" selected="selected">{{ address.firstname }} {{ address.lastname }}, {{ address.address_1 }}, {{ address.city }}, {{ address.zone }}, {{ address.country }}</option>
      {% else %}
      <option value="{{ address.address_id }}">{{ address.firstname }} {{ address.lastname }}, {{ address.address_1 }}, {{ address.city }}, {{ address.zone }}, {{ address.country }}</option>
      {% endif %}
      {% endfor %}
    </select>
  </div>
  <div class="radio" style="display: none !important;">
    <label>
      <input type="radio" name="payment_address" value="new" />
      {{ text_address_new }}</label>
  </div>
  {% endif %}
  <br />
  <div id="payment-new" style="display: {% if addresses %}none{% else %}block{% endif %};">
      <div class="form-row mt-3">
    <div class="form-group col-md-6 required">
      <label class="control-label" for="input-payment-firstname">{{ entry_firstname }}</label>
        <input type="text" name="payment_firstname" value="{{ firstname }}" disabled placeholder="{{ entry_firstname }}" id="input-payment-firstname" class="form-control" />
    </div>
    <div class="form-group col-md-6 required">
      <label class="control-label" for="input-payment-lastname">{{ entry_lastname }}</label>
             <input type="text" name="payment_lastname" disabled value="" placeholder="{{ entry_lastname }}" id="input-payment-lastname" class="form-control" />
     </div>
    <div class="form-group col-md-6">
      <label class="control-label" for="input-payment-company">{{ entry_company }}</label>
        <input type="text" name="payment_company" value="" disabled placeholder="{{ entry_company }}" id="input-payment-company" class="form-control" />
    </div>
    <div class="form-group col-md-6 required">
      <label class="control-label" for="input-payment-address-1">{{ entry_address_1 }}</label>
        <input type="text" name="payment_address_1" value="" disabled placeholder="{{ entry_address_1 }}" id="input-payment-address-1" class="form-control" />
    </div>
    <div class="form-group col-md-6">
      <label class="control-label" for="input-payment-address-2">{{ entry_address_2 }}</label>
        <input type="text" name="payment_address_2" value="" disabled placeholder="{{ entry_address_2 }}" id="input-payment-address-2" class="form-control" />
    </div>
    <div class="form-group col-md-6 required">
      <label class="control-label" for="input-payment-city">{{ entry_city }}</label>
        <input type="text" name="payment_city" value="" disabled placeholder="{{ entry_city }}" id="input-payment-city" class="form-control" />
    </div>
    <div class="form-group col-md-6 required">
      <label class="control-label" for="input-payment-postcode">{{ entry_postcode }}</label>
        <input type="text" name="payment_postcode" value=""  disabled placeholder="{{ entry_postcode }}" id="input-payment-postcode" class="form-control" />
    </div>
    <div class="form-group col-md-6 required">
      <label class="control-label" for="input-payment-country">{{ entry_country }}</label>
        <select name="payment_country_id" disabled id="input-payment-country" class="form-control">
        <option value="30" selected="selected">Brasil</option>
         
        </select>
    </div>
    <div class="form-group col-md-6 required">
      <label class="control-label" for="input-payment-zone">{{ entry_zone }}</label>
        <select name="payment_zone_id" disabled id="input-payment-zone" class="form-control">
        </select>
    </div>
    {% for custom_field in custom_fields %}
    {% if custom_field.type == 'select' %}
    <div class="form-group col-md-6{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-payment-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <select name="payment_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" id="input-payment-custom-field{{ custom_field.custom_field_id }}" class="form-control">
          <option value="">{{ text_select }}</option>
          {% for custom_field_value in custom_field.custom_field_value %}
          <option value="{{ custom_field_value.custom_field_value_id }}">{{ custom_field_value.name }}</option>
          {% endfor %}
        </select>
    </div>
    {% endif %}
    {% if custom_field.type == 'radio' %}
    <div class="form-group col-md-6 {% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label">{{ custom_field.name }}</label>
        <div id="input-payment-custom-field{{ custom_field.custom_field_id }}">
          {% for custom_field_value in custom_field.custom_field_value %}
          <div class="radio">
            <label>
              <input type="radio" name="payment_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field_value.custom_field_value_id }}" />
              {{ custom_field_value.name }}</label>
          </div>
          {% endfor %}
        </div>
    </div>
    {% endif %}
    {% if custom_field.type == 'checkbox' %}
    <div class="form-group col-md-6{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label">{{ custom_field.name }}</label>
        <div id="input-payment-custom-field{{ custom_field.custom_field_id }}">
          {% for custom_field_value in custom_field.custom_field_value %}
          <div class="checkbox">
            <label>
              <input type="checkbox" name="payment_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}][]" value="{{ custom_field_value.custom_field_value_id }}" />
              {{ custom_field_value.name }}</label>
          </div>
          {% endfor %}
        </div>
    </div>
    {% endif %}
    {% if custom_field.custom_field_id == vendedor_custom_field_id and custom_field.custom_field_id == cliente_custom_field_id %}

    {% if custom_field.type == 'text' %}
    <div class="form-group col-md-6 {% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-payment-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <input type="text" name="payment_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field.value }}" placeholder="{{ custom_field.name }}" id="input-payment-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
    </div>
    {% endif %}
    {% endif %}
    {% if custom_field.type == 'textarea' %}
    <div class="form-group col-md-6{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-payment-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <textarea name="payment_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" rows="5" placeholder="{{ custom_field.name }}" id="input-payment-custom-field{{ custom_field.custom_field_id }}" class="form-control">{{ custom_field.value }}</textarea>
    </div>
    {% endif %}
    {% if custom_field.type == 'file' %}
    <div class="form-group col-md-6{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label">{{ custom_field.name }}</label>
        <button type="button" id="button-payment-custom-field{{ custom_field.custom_field_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default"><i class="fa fa-upload"></i> {{ button_upload }}</button>
        <input type="hidden" name="payment_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="" id="input-payment-custom-field{{ custom_field.custom_field_id }}" />
    </div>
    {% endif %}
    {% if custom_field.type == 'date' %}
    <div class="form-group col-md-6{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-payment-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <div class="input-group date">
          <input type="text" name="payment_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field.value }}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD" id="input-payment-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
          <span class="input-group-btn">
          <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
          </span></div>
    </div>
    {% endif %}
    {% if custom_field.type == 'time' %}
    <div class="form-group col-md-6{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-payment-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <div class="input-group time">
          <input type="text" name="payment_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field.value }}" placeholder="{{ custom_field.name }}" data-date-format="HH:mm" id="input-payment-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
          <span class="input-group-btn">
          <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
          </span></div>
    </div>
    {% endif %}
    {% if custom_field.type == 'time' %}
    <div class="form-group col-md-6{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-payment-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <div class="input-group datetime">
          <input type="text" name="payment_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field.value }}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD HH:mm" id="input-payment-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
          <span class="input-group-btn">
          <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
          </span></div>
    </div>
    {% endif %}
    {% endfor %}
  </div>
    </div>
        </fieldset>
    </div>
    {% if shipping_required %}
    <div class="{{ class }}">
        <fieldset id="shipping-address">
            <legend>{{ text_checkout_shipping_address }}</legend>
           {% if addresses %}
  <div class="radio">
    <label>
      <input type="radio" name="shipping_address" value="existing" checked="checked" />
      {{ text_address_existing }}</label>
  </div>
  <div id="shipping-existing">
    <select name="shipping_address_id" class="form-control">
     {% for address in addresses %}
      {% if address.address_id == address_id %}
      <option value="{{ address.address_id }}" selected="selected">{{ address.firstname }} {{ address.lastname }}, {{ address.address_1 }}, {{ address.city }}, {{ address.zone }}, {{ address.country }}</option>
      {% else %}
      <option value="{{ address.address_id }}">{{ address.firstname }} {{ address.lastname }}, {{ address.address_1 }}, {{ address.city }}, {{ address.zone }}, {{ address.country }}</option>
      {% endif %}
      {% endfor %}
    </select>
  </div>
  <div class="radio">
    <label>
      <input type="radio" name="shipping_address" value="new" />
      {{ text_address_new }}</label>
  </div>
  {% endif %}
  <br />
  <div id="shipping-new" style="display: {% if addresses %}none{% else %}block{% endif %};">
    <div class="form-group col-md-12 required">
      <label class="control-label" for="input-shipping-firstname">{{ entry_firstname }}</label>
        <input type="text" name="shipping_firstname" value="" placeholder="{{ entry_firstname }}" id="input-shipping-firstname" class="form-control" />
    </div>
    <div class="form-group col-md-12 required">
      <label class="control-label" for="input-shipping-lastname">{{ entry_lastname }}</label>
        <input type="text" name="shipping_lastname" value="" placeholder="{{ entry_lastname }}" id="input-shipping-lastname" class="form-control" />
    </div>
    <div class="form-group col-md-12">
      <label class="control-label" for="input-shipping-company">{{ entry_company }}</label>
        <input type="text" name="shipping_company" value="" placeholder="{{ entry_company }}" id="input-shipping-company" class="form-control" />
    </div>
    <div class="form-group col-md-12 required">
      <label class="control-label" for="input-shipping-address-1">{{ entry_address_1 }}</label>
        <input type="text" name="shipping_address_1" value="" placeholder="{{ entry_address_1 }}" id="input-shipping-address-1" class="form-control" />
    </div>
    <div class="form-group col-md-12">
      <label class="control-label" for="input-shipping-address-2">{{ entry_address_2 }}</label>
        <input type="text" name="shipping_address_2" value="" placeholder="{{ entry_address_2 }}" id="input-shipping-address-2" class="form-control" />
    </div>
    <div class="form-group col-md-12 required">
      <label class="control-label" for="input-shipping-city">{{ entry_city }}</label>
        <input type="text" name="shipping_city" value="" placeholder="{{ entry_city }}" id="input-shipping-city" class="form-control" />
    </div>
    <div class="form-group col-md-12 required">
      <label class="control-label" for="input-shipping-postcode">{{ entry_postcode }}</label>
        <input type="text" name="shipping_postcode" value="{{ postcode }}" placeholder="{{ entry_postcode }}" id="input-shipping-postcode" class="form-control" />
    </div>
    <div class="form-group col-md-12 required">
      <label class="control-label" for="input-shipping-country">{{ entry_country }}</label>
        <select name="shipping_country_id" id="input-shipping-country" class="form-control">
          <option value="">{{ text_select }}</option>
          {% for country in countries %}
          {% if country.country_id == country_id %}
          <option value="{{ country.country_id }}" selected="selected">{{ country.name }}</option>
          {% else %}
          <option value="{{ country.country_id }}">{{ country.name }}</option>
           {% endif %}
           {% endfor %}
        </select>
    </div>
    <div class="form-group col-md-12 required">
      <label class="control-label" for="input-shipping-zone">{{ entry_zone }}</label>
        <select name="shipping_zone_id" id="input-shipping-zone" class="form-control">
        </select>
    </div>
   {% for custom_field in custom_fields %}
    {% if custom_field.type == 'select' %}
    <div class="form-group col-md-12{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-shipping-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <select name="shipping_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" id="input-shipping-custom-field{{ custom_field.custom_field_id }}" class="form-control">
          <option value="">{{ text_select }}</option>
          {% for custom_field_value in custom_field.custom_field_value %}
          <option value="{{ custom_field_value.custom_field_value_id }}">{{ custom_field_value.name }}</option>
          {% endfor %}
        </select>
    </div>
    {% endif %}
    {% if custom_field.type == 'radio' %}
    <div class="form-group col-md-12{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label">{{ custom_field.name }}</label>
        <div id="input-shipping-custom-field{{ custom_field.custom_field_id }}">
          {% for custom_field_value in custom_field.custom_field_value %}
          <div class="radio">
            <label>
              <input type="radio" name="shipping_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field_value.custom_field_value_id }}" />
              {{ custom_field_value.name }}</label>
          </div>
          {% endfor %}
        </div>
    </div>
    {% endif %}
    {% if custom_field.type == 'checkbox' %}
    <div class="form-group col-md-12{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label">{{ custom_field.name }}</label>
        <div id="input-shipping-custom-field{{ custom_field.custom_field_id }}">
          {% for custom_field_value in custom_field.custom_field_value %}
          <div class="checkbox">
            <label>
              <input type="checkbox" name="shipping_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}][]" value="{{ custom_field_value.custom_field_value_id }}" />
              {{ custom_field_value.name }}</label>
          </div>
          {% endfor %}
        </div>
    </div>
    {% endif %}
    {% if custom_field.type == 'text' %}
    <div class="form-group col-md-12{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-shipping-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <input type="text" name="shipping_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field.value }}" placeholder="{{ custom_field.name }}" id="input-shipping-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
    </div>
    {% endif %}
    {% if custom_field.type == 'textarea' %}
    <div class="form-group col-md-12{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-shipping-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <textarea name="shipping_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" rows="5" placeholder="{{ custom_field.name }}" id="input-shipping-custom-field{{ custom_field.custom_field_id }}" class="form-control">{{ custom_field.value }}</textarea>
    </div>
    {% endif %}
    {% if custom_field.type == 'file' %}
    <div class="form-group col-md-12{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label">{{ custom_field.name }}</label>
        <button type="button" id="button-shipping-custom-field{{ custom_field.custom_field_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default"><i class="fa fa-upload"></i> {{ button_upload }}</button>
        <input type="hidden" name="shipping_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="" id="input-shipping-custom-field{{ custom_field.custom_field_id }}" />
    </div>
    {% endif %}
    {% if custom_field.type == 'date' %}
    <div class="form-group col-md-12{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-shipping-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <div class="input-group date">
          <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field.value }}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD" id="input-shipping-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
          <span class="input-group-btn">
          <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
          </span></div>
    </div>
    {% endif %}
    {% if custom_field.type == 'time' %}
    <div class="form-group col-md-12{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-shipping-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <div class="input-group time">
          <input type="text" name="shipping_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field.value }}" placeholder="{{ custom_field.name }}" data-date-format="HH:mm" id="input-shipping-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
          <span class="input-group-btn">
          <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
          </span></div>
    </div>
    {% endif %}
    {% if custom_field.type == 'time' %}
    <div class="form-group col-md-12{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
      <label class="control-label" for="input-shipping-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
        <div class="input-group datetime">
          <input type="text" name="shipping_custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field.value }}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD HH:mm" id="input-shipping-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
          <span class="input-group-btn">
          <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
          </span></div>
    </div>
    {% endif %}
    {% endfor %}
  </div>
        </fieldset>
    </div>
    {% endif %}
</div>
{% if shipping_required %}
<div class="checkbox" style="display: none !important;">
    <label>
        <input type="checkbox" name="same_address" value="1" checked="checked" />
        {{ entry_shipping }}
    </label>
</div>
 {% endif %}
<br/>
<p><strong>{{ text_comments}}</strong></p>
<p><textarea name="comment" rows="3" id="comment" class="form-control">{{ comment }}</textarea></p>
<div class="buttons clearfix">
    <div class="float-right">
	      <input type="button" value="{{ button_continue }}" id="button-payment-address" data-loading-text="{{ text_loading }}" class="btn btn-primary" />
    </div>
</div>
</form>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.0/jquery.mask.min.js"></script>
<script src="catalog/view/javascript/jquery/validator/jquery.validate.min.js" type="text/javascript"></script>
<script src="catalog/view/javascript/jquery/validator/validate-default.min.js?ver=1.0.0" type="text/javascript"></script>

<script type="text/javascript"><!--
$(function() {
$.ajax({
	url:'index.php?route=account/register/cnpj&cnpj='+{{ cnpj }},
        dataType: 'json',
	success: function(resposta){
	if(resposta.status == "ERROR"){
        alert(+resposta.message + "\nPor favor, digite os dados manualmente.");
	}
                                
        $("#input-payment-lastname").val(resposta.fantasia);
        $("#input-payment-company").val(resposta.complemento);
	$("#input-payment-address-1").val(resposta.logradouro+','+resposta.numero);
	$("#input-payment-address-2").val(resposta.bairro);
        $("#input-payment-city").val(resposta.municipio);
        $("#input-payment-postcode").val(resposta.cep);
        $('#input-payment-country').find('option[value="30"]').attr('selected', true).trigger('click');
        $('#input-payment-country').trigger('click');
        carregarCep(resposta.cep.replace('/[^0-9]/g', ''));   
				
	}
});

function carregarCep(cep){
$.ajax({
	url:"index.php?route=account/register/cep&cep="+cep,
        dataType: 'json',
	success: function(dados){
	 if(!("erro" in dados)){

       if (dados.logradouro) {

      if (dados.uf) {
        // $('#input-payment-zone option[value="' + dados.uf + '"]').attr("selected", "selected");
          $("#input-payment-zone option[data-sigla='" + dados.uf + "']").prop("selected", true);
          $('#payment-address select[name=\'payment_zone_id\']').trigger('change');
          $('html, body').animate({scrollTop: $('#input-payment-zone').offset().top + 200}, 700);
           if ('#comment') $('#comment').focus();
       } else {
          $("#input-payment-zone").val("");
       }
       }
       } 
 }
});

}
        
var Register = function() {
var e = {};
return e.init = function() {
jQuery(function() {
e.validate()
})
}, e.validate = function() {
$("#form-register").validate({
	rules: {
            validationField: {
        number: true,
        required: true,
      },
	payment_firstname: {required: !0},
        payment_lastname: {required: !0},
        "payment_custom_field[account][1]": { verificaCPF: !0 },
        "payment_custom_field[account][6]": { verificaCNPJ: !0 },
	"payment_custom_field[account][3]": {required: !0},
	"payment_custom_field[account][8]": {required: !0},
        payment_address_1:{required: !0},
        "payment_custom_field[address][2]":{required: !0},
        payment_address_2:{required: !0},
        payment_city:{required: !0},
        payment_postcode:{required: !0},
        payment_country_id:{required: !0},
        payment_zone_id:{required: !0},
       //shipping
        shipping_firstname: {required: !0},
        shipping_lastname: {required: !0},
        "shipping_custom_field[account][1]": { verificaCPF: !0 },
        "shipping_custom_field[account][6]": { verificaCNPJ: !0 },
	"shipping_custom_field[account][3]": {required: !0},
	"shipping_custom_field[account][8]": {required: !0},
        shipping_address_1:{required: !0},
        "shipping_custom_field[address][2]":{required: !0},
        shipping_address_2:{required: !0},
        shipping_city:{required: !0},
        shipping_postcode:{required: !0},
        shipping_country_id:{required: !0},
        shipping_zone_id:{required: !0},

    },
        
})
}, {
init: e.init
}
}();
Register.init();
});
//--></script>

<script type="text/javascript"><!--
$('#ar-right-1 input').keydown(function(e) {
    if (e.keyCode == 13) {
        $('#button-address').click();
    }
});
//--></script>

<script type="text/javascript"><!--
$('input[name=\'payment_address\']').on('change', function() {
    if (this.value == 'new') {
        $('#payment-existing').hide();
        $('#payment-new').show();
        $('#payment-new select[name=\'payment_country_id\']').trigger('change');
    } else {
        $('#payment-existing').show();
        $('#payment-new').hide();
    }
});

{% if shipping_required %}
    $('input[name=\'shipping_address\']').on('change', function() {
        if (this.value == 'new') {
            $('#shipping-existing').hide();
            $('#shipping-new').show();
        } else {
            $('#shipping-existing').show();
            $('#shipping-new').hide();
        }
    });

    $('input[name=\'same_address\']').on('change', function() {
        var same_address = $(this).is(':checked');

        if (same_address) {
            $('#payment-address legend').html('{{ text_checkout_payment_address }}');

            $('#payment-address').parent().removeClass('col-sm-6');
            $('#payment-address').parent().addClass('col-sm-12');
            $('#shipping-address').parent().removeClass('col-sm-6');
            $('#shipping-address').parent().hide();
        }
        else {
            $('#shipping-address legend').html('{{ text_checkout_shipping_address }}');

            $('#payment-address').parent().removeClass('col-sm-12');
            $('#payment-address').parent().addClass('col-sm-6');
            $('#shipping-address').parent().addClass('col-sm-6');
            $('#shipping-address').parent().show();

            $('#shipping-address select[name=\'shipping_country_id\']').trigger('change');
        }
    });

    $('input[name=\'same_address\']').trigger('change');

    $('#shipping-address select[name=\'shipping_address_id\']').on('change', function() {
        if (!$('input[name=\'same_address\']').is(':checked')) {
            loadShippingMethodsByAddressId(this.value);
        }
    });

    {% endif %}
//--></script>

<script type="text/javascript"><!--
$('#payment-address select[name=\'payment_address_id\']').on('change', function() {
    {% if shipping_required %}
        if ($('input[name=\'same_address\']').is(':checked')) {
        loadShippingMethodsByAddressId(this.value);
    }
        {% else %}
        loadTotalsByAddressId(this.value);
        {% endif %}
    });

$('#payment-address select[name=\'payment_address_id\']').trigger('change');

$('select[name=\'payment_zone_id\']').on('change', function() {
    {% if shipping_required %}
        if ($('input[name=\'same_address\']').is(':checked')) {
        reloadShippingMethods();
    }
        {% else %}
        reloadTotals();
        {% endif %}
    });

$('input[name=\'payment_postcode\']').on('change', function() {
    if ($('input[name=\'same_address\']').is(':checked')) {
        reloadShippingMethods();
    }
});
//--></script>

<script type="text/javascript"><!--
$('#payment-address .form-group[data-sort]').detach().each(function() {
    if ($(this).attr('data-sort') >= 0 && $(this).attr('data-sort') <= $('#payment-address .form-group').length) {
        $('#payment-address .form-group').eq($(this).attr('data-sort')).before(this);
    }

    if ($(this).attr('data-sort') > $('#payment-address .form-group').length) {
        $('#payment-address .form-group:last').after(this);
    }

    if ($(this).attr('data-sort') < -$('#payment-address .form-group').length) {
        $('#payment-address .form-group:first').before(this);
    }
});

{% if shipping_required %}
    $('#shipping-address .form-group[data-sort]').detach().each(function() {
        if ($(this).attr('data-sort') >= 0 && $(this).attr('data-sort') <= $('#shipping-address .form-group').length) {
            $('#shipping-address .form-group').eq($(this).attr('data-sort')).before(this);
        }

        if ($(this).attr('data-sort') > $('#shipping-address .form-group').length) {
            $('#shipping-address .form-group:last').after(this);
        }

        if ($(this).attr('data-sort') < -$('#shipping-address .form-group').length) {
            $('#shipping-address .form-group:first').before(this);
        }
    });
    {% endif %}
//--></script>

<script type="text/javascript"><!--
$('#payment-address button[id^=\'button-payment-custom-field\']').on('click', function() {
    var node = this;

    $('#form-upload').remove();

    $('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

    $('#form-upload input[name=\'file\']').trigger('click');

    if (typeof timer != 'undefined') {
        clearInterval(timer);
    }

    timer = setInterval(function() {
        if ($('#form-upload input[name=\'file\']').val() != '') {
            clearInterval(timer);

            $.ajax({
                url: 'index.php?route=tool/upload',
                type: 'post',
                dataType: 'json',
                data: new FormData($('#form-upload')[0]),
                cache: false,
                contentType: false,
                processData: false,
                beforeSend: function() {
                    $(node).button('loading');
                },
                complete: function() {
                    $(node).button('reset');
                },
                success: function(json) {
                    $(node).parent().find('.text-danger').remove();

                    if (json['error']) {
                        $(node).parent().find('input[name^=\'payment_custom_field\']').after('<div class="text-danger">' + json['error'] + '</div>');
                    }

                    if (json['success']) {
                        alert(json['success']);

                        $(node).parent().find('input[name^=\'payment_custom_field\']').attr('value', json['code']);
                    }
                },
                error: function(xhr, ajaxOptions, thrownError) {
                    alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                }
            });
        }
    }, 500);
});

{% if shipping_required %}
    $('#shipping-address-address button[id^=\'button-shipping-custom-field\']').on('click', function() {
        var node = this;

        $('#form-upload').remove();

        $('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

        $('#form-upload input[name=\'file\']').trigger('click');

        if (typeof timer != 'undefined') {
            clearInterval(timer);
        }

        timer = setInterval(function() {
            if ($('#form-upload input[name=\'file\']').val() != '') {
                clearInterval(timer);

                $.ajax({
                    url: 'index.php?route=tool/upload',
                    type: 'post',
                    dataType: 'json',
                    data: new FormData($('#form-upload')[0]),
                    cache: false,
                    contentType: false,
                    processData: false,
                    beforeSend: function() {
                        $(node).button('loading');
                    },
                    complete: function() {
                        $(node).button('reset');
                    },
                    success: function(json) {
                        $(node).parent().find('.text-danger').remove();

                        if (json['error']) {
                            $(node).parent().find('input[name^=\'shipping_custom_field\']').after('<div class="text-danger">' + json['error'] + '</div>');
                        }

                        if (json['success']) {
                            alert(json['success']);

                            $(node).parent().find('input[name^=\'shipping_custom_field\']').attr('value', json['code']);
                        }
                    },
                    error: function(xhr, ajaxOptions, thrownError) {
                        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                    }
                });
            }
        }, 500);
    });
    {% endif %}
//--></script>
<script type="text/javascript">
    $(document).ready(function(){
  //dados pessoais
  var options =  {onKeyPress: function(data, e, field, options){

    if(data.length >=5) {

      var dia = data.split('/')[0],
      mes = data.split('/')[1],
      ano = data.split('/')[2];
      
      if(dia >31) $('#input-custom-field3').val('31/'+mes+'/'); 
      if(mes > 12) $('#input-custom-field3').val(dia+'/12/');
      
    }
  }};
  $('#input-payment-custom-field3').mask('00/00/0000', options);
  //$('#input-custom-field3').mask('00/00/0000');
  $('#input-payment-custom-field1').mask('000.000.000-00', {reverse: false});
  //$('#input-payment-custom-field6').mask('00.000.000/0000-00', {reverse: false});
  $('#input-custom-field2').mask('00.000.0000000-0', {reverse: false});
  //$('#input-telephone').mask('(00) 0000-0000');

  //endereço
  $('#input-postcode').mask('00000-000');
  $('#input-custom-field5').mask('0000000');
});
</script>

<script type="text/javascript">
  $('input').keyup(function(){
    this.value = this.value.toLowerCase();
});
</script>

<script type="text/javascript">
 function addZero (data){
   return  data+(data <10 ? '0':'');
 }

 var num =$('input-custom-field2').val();
 var nNum = addZero(num);
</script>
<script type="text/javascript"><!--
$('.date').datetimepicker({
    pickTime: false
});

$('.time').datetimepicker({
    pickDate: false
});

$('.datetime').datetimepicker({
    pickDate: true,
    pickTime: true
});
//--></script>

<script type="text/javascript"><!--
$('#payment-address select[name=\'payment_country_id\']').on('change', function() {
    $.ajax({
        url: 'index.php?route=checkout/checkout/country&country_id=' + this.value,
        dataType: 'json',
        beforeSend: function() {
            $('#payment-address select[name=\'payment_country_id\']').after(' <i class="fa fa-circle-o-notch fa-spin"></i>');
        },
        complete: function() {
            $('.fa-spin').remove();
        },
        success: function(json) {
            if (json['postcode_required'] == '1') {
                $('#payment-address input[name=\'payment_postcode\']').parent().addClass('required');
                $('#payment-address input[name=\'payment_postcode\']').prop('required', true);
            } else {
                $('#payment-address input[name=\'payment_postcode\']').parent().removeClass('required');
                $('#payment-address input[name=\'payment_postcode\']').removeAttr('required');
            }

            html = '<option value="" data-sigla="">{{ text_select }}</option>';

            if (json['zone'] && json['zone'] != '') {
                for (i = 0; i < json['zone'].length; i++) {
                    html += '<option value="' + json['zone'][i]['zone_id'] + '"data-sigla="'+ json['zone'][i]['code']+'"';

                    if (json['zone'][i]['zone_id'] == '{{ payment_zone_id }}') {
                        html += ' selected="selected"';
                    }

                    html += '>' + json['zone'][i]['name'] + '</option>';
                }
            } else {
                html += '<option value="0" selected="selected">{{ text_none }}</option>';
            }

            $('#payment-address select[name=\'payment_zone_id\']').html(html);

            {% if shipping_required %}
                if ($('input[name=\'same_address\']').is(':checked') && $('select[name=\'payment_zone_id\']').val() != '') {
                reloadShippingMethods();
            }
                {% else %}
                if ($('select[name=\'payment_zone_id\']').val() != '') {
                reloadTotals();
            }
                {% endif %}
            },
            error: function(xhr, ajaxOptions, thrownError) {
                alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
            }
            });
            });

$('#payment-address select[name=\'payment_country_id\']').ready(function() {
    // address available, customer logged in
    var address_id = $('#payment-address select[name=\'payment_address_id\']').val();
    if (address_id != '' && address_id != undefined) {
        return;
    }

    if (this.value != '') {
        $('#payment-address select[name=\'payment_country_id\']').trigger('change');
    }
    else {
        loadTotals();
    }
});

{% if shipping_required %}
    $('#shipping-address select[name=\'shipping_country_id\']').on('change', function() {
        $.ajax({
            url: 'index.php?route=checkout/checkout/country&country_id=' + this.value,
            dataType: 'json',
            beforeSend: function() {
                $('#shipping-address select[name=\'shipping_country_id\']').after(' <i class="fa fa-circle-o-notch fa-spin"></i>');
            },
            complete: function() {
                $('.fa-spin').remove();
            },
            success: function(json) {
                if (json['postcode_required'] == '1') {
                    $('#shipping-address input[name=\'shipping_postcode\']').parent().addClass('required');
                    $('#shipping-address input[name=\'shipping_postcode\']').prop('required', true);
                } else {
                    $('#shipping-address input[name=\'shipping_postcode\']').parent().removeClass('required');
                    $('#shipping-address input[name=\'shipping_postcode\']').removeAttr('required');
                }

                html = '<option value="">{{ text_select }}</option>';

                if (json['zone'] && json['zone'] != '') {
                    for (i = 0; i < json['zone'].length; i++) {
                        html += '<option value="' + json['zone'][i]['zone_id'] + '"';

                        if (json['zone'][i]['zone_id'] == '{{ shipping_zone_id }}') {
                            html += ' selected="selected"';
                        }

                        html += '>' + json['zone'][i]['name'] + '</option>';
                    }
                } else {
                    html += '<option value="0" selected="selected">{{ text_none }}</option>';
                }

                $('#shipping-address select[name=\'shipping_zone_id\']').html(html);

                if ($('select[name=\'shipping_zone_id\']').val() != '') {
                    reloadShippingMethods();
                }
            },
            error: function(xhr, ajaxOptions, thrownError) {
                alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
            }
        });
    });

    $('select[name=\'shipping_zone_id\']').on('change', function() {
        reloadShippingMethods();
    });

    $('input[name=\'shipping_postcode\']').on('change', function() {
        reloadShippingMethods();
    });

    function reloadShippingMethods() {
        if ($('input[name=\'same_address\']').is(':checked')) {
            var address_type = 'payment';
            var address_country_id = $('select[name=\'payment_country_id\']').val();
            var address_zone_id = $('select[name=\'payment_zone_id\']').val();
            var address_city = $('input[name=\'payment_city\']').val();
            var address_postcode = $('input[name=\'payment_postcode\']').val();
        }
        else {
            var address_type = 'shipping';
            var address_country_id = $('select[name=\'shipping_country_id\']').val();
            var address_zone_id = $('select[name=\'shipping_zone_id\']').val();
            var address_city = $('input[name=\'shipping_city\']').val();
            var address_postcode = $('input[name=\'shipping_postcode\']').val();
        }

        if (address_country_id == undefined) {
            address_country_id = 0;
        }

        if (address_zone_id == undefined) {
            address_zone_id = 0;
        }

        if (address_city == undefined) {
            address_city = '';
        }

        if (address_postcode == undefined) {
            address_postcode = '';
        }

        loadShippingMethodsByAddressFields(address_type, address_country_id, address_zone_id, address_city, address_postcode);
    }
    {% endif %}

function reloadTotals() {
    var address_type = 'payment';
    var address_country_id = $('select[name=\'payment_country_id\']').val();
    var address_zone_id = $('select[name=\'payment_zone_id\']').val();
    var address_city = $('input[name=\'payment_city\']').val();
    var address_postcode = $('input[name=\'payment_postcode\']').val();

    if (address_country_id == undefined) {
        address_country_id = 0;
    }

    if (address_zone_id == undefined) {
        address_zone_id = 0;
    }

    if (address_city == undefined) {
        address_city = '';
    }

    if (address_postcode == undefined) {
        address_postcode = '';
    }

    loadTotalsByAddressFields(address_type, address_country_id, address_zone_id, address_city, address_postcode);
}
//--></script>